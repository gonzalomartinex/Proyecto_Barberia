{% extends 'base.html' %}
{% block title %}Barberos | Cortes Con Historia{% endblock %}
{% block content %}
<h1 class="mb-4">Nuestros Barberos</h1>
<div class="row">
    {% for barbero in barberos %}
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="ratio ratio-4x3" style="overflow:hidden;">
                {% if barbero.foto %}
                <img src="{{ barbero.foto.url }}" class="card-img-top object-fit-cover" alt="{{ barbero.nombre }}" style="width:100%;height:100%;object-fit:cover;object-position:center;">
                {% else %}
                <img src="/media/Default/noimage.png" class="card-img-top object-fit-cover" alt="{{ barbero.nombre }}" style="width:100%;height:100%;object-fit:cover;object-position:center;">
                {% endif %}
            </div>
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ barbero.nombre }}</h5>
                <p class="card-text" style="max-height: 4.5em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">
                  {{ barbero.bio|truncatechars:120 }}
                  {% if barbero.bio|length > 120 %}
                  <span class="text-muted" style="font-size:0.95em;">... (ver m√°s)</span>
                  {% endif %}
                </p>
                <a href="/barberos/{{ barbero.id }}/" class="btn btn-outline-primary mt-auto">Ver Perfil</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% if user.is_authenticated and user.is_staff %}
  <a href="{% url 'registrar-barbero' %}" class="btn btn-success position-fixed" style="bottom: 32px; right: 32px; z-index: 1050; border-radius: 50%; width: 64px; height: 64px; display: flex; align-items: center; justify-content: center; font-size: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
    <span class="visually-hidden">Registrar nuevo barbero</span>
    <span style="font-size:2.2rem;line-height:1;">+</span>
  </a>
{% endif %}
{% endblock %}
